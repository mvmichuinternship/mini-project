INFO  09:41:51 Now listening on: http://localhost:5023
INFO  09:41:51 Application started. Press Ctrl+C to shut down.
INFO  09:41:51 Hosting environment: Development
INFO  09:41:51 Content root path: C:\Users\VC\Desktop\mini-project\FoodDeliveryWebAppSln\FoodDeliveryWebApp\
INFO  09:43:24 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  09:43:26 Executed DbCommand (176ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[FId], [m].[FName], [m].[QuantityInStock], [m].[UnitPrice]
FROM [Menus] AS [m]
WHERE [m].[FId] = @__key_0
ERROR 09:43:33 An unhandled exception has occurred while executing the request.
FoodDeliveryWebApp.exceptions.NoId: No user with the given ID
   at FoodDeliveryWebApp.repositories.MenuRepository.Get(Int32 key) in C:\Users\VC\Desktop\mini-project\FoodDeliveryWebAppSln\FoodDeliveryWebApp\repositories\MenuRepository.cs:line 39
   at FoodDeliveryWebApp.repositories.MenuRepository.Delete(Int32 key) in C:\Users\VC\Desktop\mini-project\FoodDeliveryWebAppSln\FoodDeliveryWebApp\repositories\MenuRepository.cs:line 27
   at FoodDeliveryWebApp.services.AdminServices.DeleteMenu(Int32 menu) in C:\Users\VC\Desktop\mini-project\FoodDeliveryWebAppSln\FoodDeliveryWebApp\services\AdminServices.cs:line 24
   at FoodDeliveryWebApp.Controllers.AdminController.Delete(Int32 menu) in C:\Users\VC\Desktop\mini-project\FoodDeliveryWebAppSln\FoodDeliveryWebApp\Controllers\AdminController.cs:line 83
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  09:44:20 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  09:44:20 Executed DbCommand (34ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[FId], [m].[FName], [m].[QuantityInStock], [m].[UnitPrice]
FROM [Menus] AS [m]
WHERE [m].[FId] = @__key_0
INFO  09:44:24 Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Menus]
WHERE [FId] = @p0;
SELECT @@ROWCOUNT;
INFO  09:44:27 Success
INFO  02:29:24 Now listening on: http://localhost:5023
INFO  02:29:24 Application started. Press Ctrl+C to shut down.
INFO  02:29:24 Hosting environment: Development
INFO  02:29:24 Content root path: C:\Users\VC\Desktop\mini-project\FoodDeliveryWebAppSln\FoodDeliveryWebApp\
INFO  03:35:19 Now listening on: http://localhost:5023
INFO  03:35:19 Application started. Press Ctrl+C to shut down.
INFO  03:35:19 Hosting environment: Development
INFO  03:35:19 Content root path: C:\Users\VC\Desktop\mini-project\FoodDeliveryWebAppSln\FoodDeliveryWebApp\
INFO  04:33:39 Now listening on: http://localhost:5023
INFO  04:33:39 Application started. Press Ctrl+C to shut down.
INFO  04:33:39 Hosting environment: Development
INFO  04:33:39 Content root path: C:\Users\VC\Desktop\mini-project\FoodDeliveryWebAppSln\FoodDeliveryWebApp\
INFO  04:34:48 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:34:49 Executed DbCommand (139ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Admins] ([Name], [Phone], [Role])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [Admins]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
INFO  04:34:49 Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (Size = 8000) (DbType = Binary), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([AdminId], [CustomerId], [Name], [Password], [PasswordHashKey], [Phone], [Role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Id]
FROM [Users]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
INFO  04:35:41 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:35:42 Executed DbCommand (15ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Customers] ([Name], [Phone], [Role])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [Customers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
INFO  04:35:42 Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (Size = 8000) (DbType = Binary), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([AdminId], [CustomerId], [Name], [Password], [PasswordHashKey], [Phone], [Role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Id]
FROM [Users]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
INFO  04:36:25 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:36:25 Executed DbCommand (11ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AdminId], [u].[CustomerId], [u].[Name], [u].[Password], [u].[PasswordHashKey], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Id] = @__key_0
INFO  04:36:25 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AdminId], [u].[CustomerId], [u].[Name], [u].[Password], [u].[PasswordHashKey], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Id] = @__key_0
INFO  04:37:41 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:37:41 Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Menus] ([FName], [QuantityInStock], [UnitPrice])
VALUES (@p0, @p1, @p2);
SELECT [FId]
FROM [Menus]
WHERE @@ROWCOUNT = 1 AND [FId] = scope_identity();
INFO  04:38:29 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:38:29 Executed DbCommand (6ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[FId], [m].[FName], [m].[QuantityInStock], [m].[UnitPrice]
FROM [Menus] AS [m]
WHERE [m].[FId] = @__key_0
INFO  04:38:29 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[FId], [m].[FName], [m].[QuantityInStock], [m].[UnitPrice]
FROM [Menus] AS [m]
WHERE [m].[FId] = @__key_0
INFO  04:38:29 Executed DbCommand (12ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menus] SET [FName] = @p0, [QuantityInStock] = @p1, [UnitPrice] = @p2
WHERE [FId] = @p3;
SELECT @@ROWCOUNT;
INFO  04:39:02 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:39:02 Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[FId], [m].[FName], [m].[QuantityInStock], [m].[UnitPrice]
FROM [Menus] AS [m]
INFO  04:39:34 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:39:34 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[FId], [m].[FName], [m].[QuantityInStock], [m].[UnitPrice]
FROM [Menus] AS [m]
WHERE [m].[FId] = @__key_0
INFO  04:39:34 Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Menus]
WHERE [FId] = @p0;
SELECT @@ROWCOUNT;
INFO  04:39:34 Success
INFO  04:39:46 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:39:46 Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[FId], [m].[FName], [m].[QuantityInStock], [m].[UnitPrice]
FROM [Menus] AS [m]
INFO  04:42:10 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:42:10 Executed DbCommand (14ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[CustomerId]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  04:42:11 Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Carts] ([CartId], [CustomerId])
VALUES (@p0, @p1);
INFO  04:42:11 Executed DbCommand (7ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CartDetailsId], [c].[CartId], [c].[FId], [c].[MenuFId], [c].[Qty_ordered], [c].[Total]
FROM [CartDetails] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  04:42:11 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[FId], [m].[FName], [m].[QuantityInStock], [m].[UnitPrice]
FROM [Menus] AS [m]
WHERE [m].[FId] = @__key_0
INFO  04:42:11 Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CartDetails] ([CartId], [FId], [MenuFId], [Qty_ordered], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [CartDetailsId]
FROM [CartDetails]
WHERE @@ROWCOUNT = 1 AND [CartDetailsId] = scope_identity();
INFO  04:42:50 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:42:50 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[CustomerId]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  04:42:50 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[CustomerId]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  04:42:50 Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Carts] SET [CustomerId] = @p0
WHERE [CartId] = @p1;
SELECT @@ROWCOUNT;
INFO  04:42:50 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CartDetailsId], [c].[CartId], [c].[FId], [c].[MenuFId], [c].[Qty_ordered], [c].[Total]
FROM [CartDetails] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  04:42:50 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[FId], [m].[FName], [m].[QuantityInStock], [m].[UnitPrice]
FROM [Menus] AS [m]
WHERE [m].[FId] = @__key_0
INFO  04:42:50 Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CartDetails] ([CartId], [FId], [MenuFId], [Qty_ordered], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [CartDetailsId]
FROM [CartDetails]
WHERE @@ROWCOUNT = 1 AND [CartDetailsId] = scope_identity();
INFO  04:43:24 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:43:24 Executed DbCommand (19ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[CustomerId]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  04:43:36 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:43:36 Executed DbCommand (4ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CartId], [c].[FId], [c].[Qty_ordered], [c].[Total]
FROM [CartDetails] AS [c]
WHERE [c].[CartId] = @__cartId_0
INFO  04:43:36 Executed DbCommand (5ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c].[Total]), 0)
FROM [CartDetails] AS [c]
WHERE [c].[CartId] = @__cartId_0
INFO  04:44:39 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:44:40 Executed DbCommand (1,032ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[CustomerId]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  04:44:40 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([OId], [CartId], [CustomerId], [Status])
VALUES (@p0, @p1, @p2, @p3);
INFO  04:44:40 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CartDetailsId], [c].[CartId], [c].[FId], [c].[MenuFId], [c].[Qty_ordered], [c].[Total]
FROM [CartDetails] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  04:44:40 Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([FId], [MenuFId], [OId], [OrderOId], [Qty_ordered], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [OrderDetailsId]
FROM [OrderDetails]
WHERE @@ROWCOUNT = 1 AND [OrderDetailsId] = scope_identity();
INFO  04:44:40 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[FId], [m].[FName], [m].[QuantityInStock], [m].[UnitPrice]
FROM [Menus] AS [m]
WHERE [m].[FId] = @__key_0
INFO  04:44:40 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[FId], [m].[FName], [m].[QuantityInStock], [m].[UnitPrice]
FROM [Menus] AS [m]
WHERE [m].[FId] = @__key_0
INFO  04:44:40 Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menus] SET [FName] = @p0, [QuantityInStock] = @p1, [UnitPrice] = @p2
WHERE [FId] = @p3;
SELECT @@ROWCOUNT;
INFO  04:44:40 Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([FId], [MenuFId], [OId], [OrderOId], [Qty_ordered], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [OrderDetailsId]
FROM [OrderDetails]
WHERE @@ROWCOUNT = 1 AND [OrderDetailsId] = scope_identity();
INFO  04:44:40 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[FId], [m].[FName], [m].[QuantityInStock], [m].[UnitPrice]
FROM [Menus] AS [m]
WHERE [m].[FId] = @__key_0
INFO  04:44:40 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [m].[FId], [m].[FName], [m].[QuantityInStock], [m].[UnitPrice]
FROM [Menus] AS [m]
WHERE [m].[FId] = @__key_0
INFO  04:44:40 Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menus] SET [FName] = @p0, [QuantityInStock] = @p1, [UnitPrice] = @p2
WHERE [FId] = @p3;
SELECT @@ROWCOUNT;
INFO  04:44:40 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[CustomerId]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  04:44:40 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartDetailsId], [c].[CartId], [c].[FId], [c].[MenuFId], [c].[Qty_ordered], [c].[Total]
FROM [CartDetails] AS [c]
WHERE [c].[CartDetailsId] = @__key_0
INFO  04:44:40 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartDetails]
WHERE [CartDetailsId] = @p0;
SELECT @@ROWCOUNT;
INFO  04:44:40 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartDetailsId], [c].[CartId], [c].[FId], [c].[MenuFId], [c].[Qty_ordered], [c].[Total]
FROM [CartDetails] AS [c]
WHERE [c].[CartDetailsId] = @__key_0
INFO  04:44:40 Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartDetails]
WHERE [CartDetailsId] = @p0;
SELECT @@ROWCOUNT;
INFO  04:44:40 Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[CustomerId]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
INFO  04:45:07 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:45:07 Executed DbCommand (5ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [o].[OId], [o].[FId], [o].[Qty_ordered], [o].[Total]
FROM [OrderDetails] AS [o]
WHERE [o].[OId] = @__orderId_0
INFO  04:45:07 Executed DbCommand (3ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0)
FROM [OrderDetails] AS [o]
WHERE [o].[OId] = @__orderId_0
INFO  04:45:29 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:45:29 Executed DbCommand (14ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OId], [o].[CartId], [o].[CustomerId], [o].[Status]
FROM [Orders] AS [o]
WHERE [o].[OId] = @__key_0
INFO  04:46:00 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:46:00 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [o].[OId], [o].[CartId], [o].[CustomerId], [o].[Status]
FROM [Orders] AS [o]
WHERE [o].[OId] = @__key_0
INFO  04:46:00 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [o].[OrderDetailsId], [o].[FId], [o].[MenuFId], [o].[OId], [o].[OrderOId], [o].[Qty_ordered], [o].[Total]
FROM [OrderDetails] AS [o]
WHERE [o].[OId] = @__key_0
INFO  04:46:00 Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [CustomerId], [OId], [PaymentMethod], [Status])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [PayId]
FROM [Payments]
WHERE @@ROWCOUNT = 1 AND [PayId] = scope_identity();
INFO  04:46:40 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:46:40 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [p].[PayId], [p].[Amount], [p].[CustomerId], [p].[OId], [p].[PaymentMethod], [p].[Status]
FROM [Payments] AS [p]
WHERE [p].[PayId] = @__key_0
INFO  04:46:58 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:46:58 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [p].[PayId], [p].[Amount], [p].[CustomerId], [p].[OId], [p].[PaymentMethod], [p].[Status]
FROM [Payments] AS [p]
WHERE [p].[PayId] = @__key_0
INFO  04:46:58 Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Payments]
WHERE [PayId] = @p0;
SELECT @@ROWCOUNT;
INFO  04:47:06 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:47:06 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [p].[PayId], [p].[Amount], [p].[CustomerId], [p].[OId], [p].[PaymentMethod], [p].[Status]
FROM [Payments] AS [p]
WHERE [p].[PayId] = @__key_0
ERROR 04:47:06 An unhandled exception has occurred while executing the request.
FoodDeliveryWebApp.exceptions.NoId: No payment with the given ID
   at FoodDeliveryWebApp.repositories.PaymentRepository.Get(Int32 key) in C:\Users\VC\Desktop\mini-project\FoodDeliveryWebAppSln\FoodDeliveryWebApp\repositories\PaymentRepository.cs:line 40
   at FoodDeliveryWebApp.services.PaymentService.ViewPayment(Int32 payment) in C:\Users\VC\Desktop\mini-project\FoodDeliveryWebAppSln\FoodDeliveryWebApp\services\PaymentService.cs:line 56
   at FoodDeliveryWebApp.Controllers.PaymentController.ViewPayment(Int32 id) in C:\Users\VC\Desktop\mini-project\FoodDeliveryWebAppSln\FoodDeliveryWebApp\Controllers\PaymentController.cs:line 61
   at lambda_method596(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
INFO  04:48:41 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:48:41 Executed DbCommand (22ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Single)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Feedbacks] ([Comment], [CommentId], [CustomerId], [FId], [FbCommentCommentId], [Rating])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [FbId]
FROM [Feedbacks]
WHERE @@ROWCOUNT = 1 AND [FbId] = scope_identity();
INFO  04:49:36 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:49:36 Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [FbComments] ([AdminId], [CommentText], [FbId])
VALUES (@p0, @p1, @p2);
SELECT [CommentId]
FROM [FbComments]
WHERE @@ROWCOUNT = 1 AND [CommentId] = scope_identity();
INFO  04:49:36 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [f].[FbId], [f].[Comment], [f].[CommentId], [f].[CustomerId], [f].[FId], [f].[FbCommentCommentId], [f].[Rating]
FROM [Feedbacks] AS [f]
WHERE [f].[FbId] = @__key_0
INFO  04:49:36 Executed DbCommand (7ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [f].[FbId], [f].[Comment], [f].[CommentId], [f].[CustomerId], [f].[FId], [f].[FbCommentCommentId], [f].[Rating]
FROM [Feedbacks] AS [f]
WHERE [f].[FbId] = @__key_0
ERROR 04:49:36 Failed executing DbCommand (28ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Single)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Feedbacks] SET [Comment] = @p0, [CommentId] = @p1, [CustomerId] = @p2, [FId] = @p3, [FbCommentCommentId] = @p4, [Rating] = @p5
WHERE [FbId] = @p6;
SELECT @@ROWCOUNT;
ERROR 04:49:36 An exception occurred in the database while saving changes for context type 'FoodDeliveryWebApp.context.FoodAppContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Feedbacks_Menus_CommentId". The conflict occurred in database "FoodDeliveryAppDB", table "dbo.Menus", column 'FId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__189_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bed854fb-40ae-4218-b640-b89cf641ae1c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Feedbacks_Menus_CommentId". The conflict occurred in database "FoodDeliveryAppDB", table "dbo.Menus", column 'FId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__189_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bed854fb-40ae-4218-b640-b89cf641ae1c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
FATAL 04:49:36 Unable to reply to feedback
INFO  04:51:37 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:51:37 Executed DbCommand (11ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [f].[CommentId], [f].[AdminId], [f].[CommentText], [f].[FbId]
FROM [FbComments] AS [f]
WHERE [f].[FbId] = @__key_0
INFO  04:51:37 Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [f].[CommentId], [f].[AdminId], [f].[CommentText], [f].[FbId]
FROM [FbComments] AS [f]
WHERE [f].[CommentId] = @__key_0
INFO  04:51:37 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [FbComments]
WHERE [CommentId] = @p0;
SELECT @@ROWCOUNT;
INFO  04:52:03 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:52:04 Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [FbComments] ([AdminId], [CommentText], [FbId])
VALUES (@p0, @p1, @p2);
SELECT [CommentId]
FROM [FbComments]
WHERE @@ROWCOUNT = 1 AND [CommentId] = scope_identity();
INFO  04:52:08 Executed DbCommand (12ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [f].[FbId], [f].[Comment], [f].[CommentId], [f].[CustomerId], [f].[FId], [f].[FbCommentCommentId], [f].[Rating]
FROM [Feedbacks] AS [f]
WHERE [f].[FbId] = @__key_0
INFO  04:52:15 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [f].[FbId], [f].[Comment], [f].[CommentId], [f].[CustomerId], [f].[FId], [f].[FbCommentCommentId], [f].[Rating]
FROM [Feedbacks] AS [f]
WHERE [f].[FbId] = @__key_0
ERROR 04:52:19 Failed executing DbCommand (23ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Single)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Feedbacks] SET [Comment] = @p0, [CommentId] = @p1, [CustomerId] = @p2, [FId] = @p3, [FbCommentCommentId] = @p4, [Rating] = @p5
WHERE [FbId] = @p6;
SELECT @@ROWCOUNT;
ERROR 04:52:19 An exception occurred in the database while saving changes for context type 'FoodDeliveryWebApp.context.FoodAppContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Feedbacks_Menus_CommentId". The conflict occurred in database "FoodDeliveryAppDB", table "dbo.Menus", column 'FId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__189_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bed854fb-40ae-4218-b640-b89cf641ae1c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Feedbacks_Menus_CommentId". The conflict occurred in database "FoodDeliveryAppDB", table "dbo.Menus", column 'FId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__189_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bed854fb-40ae-4218-b640-b89cf641ae1c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
FATAL 04:52:39 Unable to reply to feedback
INFO  04:53:23 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:53:24 Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [FbComments] ([AdminId], [CommentText], [FbId])
VALUES (@p0, @p1, @p2);
SELECT [CommentId]
FROM [FbComments]
WHERE @@ROWCOUNT = 1 AND [CommentId] = scope_identity();
INFO  04:53:29 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [f].[FbId], [f].[Comment], [f].[CommentId], [f].[CustomerId], [f].[FId], [f].[FbCommentCommentId], [f].[Rating]
FROM [Feedbacks] AS [f]
WHERE [f].[FbId] = @__key_0
FATAL 04:53:55 Unable to reply to feedback
INFO  04:54:58 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
ERROR 04:54:59 Failed executing DbCommand (49ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [FbComments] ([CommentId], [AdminId], [CommentText], [FbId])
VALUES (@p0, @p1, @p2, @p3);
ERROR 04:54:59 An exception occurred in the database while saving changes for context type 'FoodDeliveryWebApp.context.FoodAppContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'FbComments' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__189_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bed854fb-40ae-4218-b640-b89cf641ae1c
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'FbComments' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__189_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bed854fb-40ae-4218-b640-b89cf641ae1c
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
FATAL 04:55:14 Unable to reply to feedback
INFO  04:55:54 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:55:54 Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [f].[CommentId], [f].[AdminId], [f].[CommentText], [f].[FbId]
FROM [FbComments] AS [f]
WHERE [f].[FbId] = @__key_0
INFO  04:55:54 Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [f].[CommentId], [f].[AdminId], [f].[CommentText], [f].[FbId]
FROM [FbComments] AS [f]
WHERE [f].[CommentId] = @__key_0
INFO  04:55:54 Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [FbComments]
WHERE [CommentId] = @p0;
SELECT @@ROWCOUNT;
INFO  04:55:54 Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [f].[FbId], [f].[Comment], [f].[CommentId], [f].[CustomerId], [f].[FId], [f].[FbCommentCommentId], [f].[Rating]
FROM [Feedbacks] AS [f]
WHERE [f].[FbId] = @__key_0
INFO  04:55:54 Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Feedbacks]
WHERE [FbId] = @p0;
SELECT @@ROWCOUNT;
INFO  04:58:23 Now listening on: http://localhost:5023
INFO  04:58:23 Application started. Press Ctrl+C to shut down.
INFO  04:58:23 Hosting environment: Development
INFO  04:58:23 Content root path: C:\Users\VC\Desktop\mini-project\FoodDeliveryWebAppSln\FoodDeliveryWebApp\
INFO  04:59:06 Entity Framework Core 6.0.30 initialized 'FoodAppContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.30' with options: None
INFO  04:59:08 Executed DbCommand (253ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [c].[CartId], [c].[CustomerId]
FROM [Carts] AS [c]
WHERE [c].[CartId] = @__key_0
ERROR 04:59:12 An unhandled exception has occurred while executing the request.
FoodDeliveryWebApp.exceptions.UnableToRegisterException: Unable to add to order at the moment
   at FoodDeliveryWebApp.services.OrderService.AddOrderAndDetails(OrderAndDetailsDTO orderAndDetailsDTO) in C:\Users\VC\Desktop\mini-project\FoodDeliveryWebAppSln\FoodDeliveryWebApp\services\OrderService.cs:line 68
   at FoodDeliveryWebApp.Controllers.OrderController.Register(OrderAndDetailsDTO menu) in C:\Users\VC\Desktop\mini-project\FoodDeliveryWebAppSln\FoodDeliveryWebApp\Controllers\OrderController.cs:line 43
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
